<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="conceptId">
 <title>Extending the PDF-D4P transformation type</title>
 <conbody>
  <p>The PDF-D4P transformation type implements a completely different processing model for constructing page masters, page sequence masters, and page sequences.</p>
    <p><xref
      href="#conceptId/table-extension-point-quickref"
      format="dita"/> lists the aspects of the publication whose generation you can customize and the associated XSLT modes, named templates, and attribute sets. In general, where there is a mode, you can implement templates in that mode to override or extend the default behavior. When there is a named template you can override the named template to change the default behavior. When there is an attribute set you can override the attribute set to configure specific properties of the result XSL-FO elements.</p>
    <table
      frame="all"
      id="table-extension-point-quickref">
      <title>Extension Point Quick Reference</title>
      <tgroup
        cols="4">
        <colspec
          colname="c1"
          colnum="1"
          colwidth="1.02*"/>
        <colspec
          colname="c2"
          colnum="2"
          colwidth="1.0*"/>
        <colspec
          colname="c3"
          colnum="3"
          colwidth="1.01*"/>
        <colspec
          colname="c4"
          colnum="4"
          colwidth="1.01*"/>
        <thead>
          <row>
            <entry>Publication Aspect</entry>
            <entry>Modes</entry>
            <entry>Named Templates</entry>
            <entry>Attribute Sets</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>Page masters</entry>
            <entry>generateLayoutMasters</entry>
            <entry>createDefaultLayoutMasters,
              createLayoutMasterSet </entry>
            <entry/>
          </row>
          <row>
            <entry>Page sequence masters</entry>
            <entry>createPageSequenceMasters</entry>
            <entry>createDefaultPageSequenceMasters</entry>
            <entry/>
          </row>
          <row>
            <entry>Page sequences</entry>
            <entry>constructNavTreePageSequences,
              constructPageSequence,
              getPublicationRegion,
              getTopLevelTopics,
              setPageNumberFormat,
              setInitialPageNumber,
              constructStaticContent</entry>
            <entry>constructNavTreePageSequences,
              insertBodyStaticContents</entry>
            <entry/>
          </row>
          <row>
            <entry>Page breaks for topics</entry>
            <entry>setTopicPageBreak</entry>
            <entry>setTopicPageBreak</entry>
            <entry>topic-first-block-topLevel. topic-first-block-<varname>topicType</varname></entry>
          </row>
          <row>
            <entry>Front cover</entry>
            <entry>getFrontCoverTopics, getFrontCoverGraphicUri</entry>
            <entry>createCoversAndInitialPages, createFrontCover</entry>
            <entry>region-body.front-cover, front-cover-graphic</entry>
          </row>
          <row>
            <entry>Back cover</entry>
            <entry>getBackCoverTopics, getBackCoverGraphicUri</entry>
            <entry>createLastPages, createBackCover</entry>
            <entry>back-cover-graphic</entry>
          </row>
          <row>
            <entry>Bookmark list</entry>
            <entry>bookmark</entry>
            <entry/>
            <entry/>
          </row>
          <row>
            <entry>Topic title
              numbering</entry>
            <entry>enumeration,
              getTitle</entry>
            <entry>getTitle</entry>
            <entry/>
            <entry/>
          </row>
        </tbody>
      </tgroup>
    </table>
    <p>The files for the PDF-D4P plugin
      mirror the filenames and
      organization of the base PDF
      transform for the most part, so if
      you are familiar with the base PDF
      transform you should be able to
      quickly find any overrides or
      extensions for the PDF-D4P plugin.
      Where the names do not match, the
      PDF-D4P filenames reflect the mode
      or general processing concern the
      files implement.</p>
    <p>A key change is an abstraction
      and extension of the general
      notion of "topicref type". The
      library function
      dita-ot-pdf:determineTopicType()
      takes a topic and returns its
      abstract topic type, e.g.
      "topicChapter", "topicAbstract".
      Most of the business logic that
      maps specific topics to specific
      output results is based on topic
      type, not the actual root tagname
      or DITA class. This abstraction
      allows you to use any rule at all
      to determine that a given topic
      is, for example, a chapter or an
      appendix. Usually this is based on
      the structure of the map, as in
      the case of Bookmap, where
      topicrefs of
      <codeph>&lt;part></codeph> and
      <codeph>&lt;chapter></codeph>
      determine the topic types of the
      topics they point to.</p>
 </conbody>
</concept>
