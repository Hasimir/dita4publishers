<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "urn:pubid:dita4publishers.sourceforge.net:doctypes:dita:concept" "concept.dtd">
<concept id="conceptId">
 <title>The <xmlelem>index-terms:index-terms</xmlelem> collected data</title>
 <shortdesc>The <xmlelem>index-terms:index-terms</xmlelem> collected data component of the <varname>collected-data</varname> variable contains a copy of all the index markup from the publication, both in its ungrouped and sorted form and grouped and sorted.</shortdesc>
  <prolog>
    <metadata>
      <keywords>
        <indexterm>index-terms:index-terms</indexterm>
        <indexterm>index processing</indexterm>
      </keywords>
    </metadata>
  </prolog>
 <conbody>
    <p>The <xmlelem>index-terms:index-terms</xmlelem> data structure is constructed when index processing is turned on for the XSLT transform (that is, the global variable <varname>generateIndexBoolean</varname> is set to <apiname>true()</apiname>. It contains two parts: <xmlelem>index-terms:ungrouped</xmlelem>, which reflects all the index terms in the publication as gathered from the map and topics, and <xmlelem>index-terms:grouped-and-sorted</xmlelem>, which contains a generic grouped and sorted representatoin of the index.</p>
    <p>The group and sorted index structure can then be used to generate a back-of-the-book index in any output format (HTML, PDF, etc.).</p>
    <p>Each index term contains its label, it's original markup as copied from the original input, and any subordinate terms, see, or see-also components. Leaf terms (that is, terms that should have associated page numbers or their equivalent) contain pointers to the source element to which the index term applies, either a topic or a position within a topic. Rendition-specific processing can then translate the source locations into the corresponding rendition-specific locations (e.g., HTML pages, FO element IDs, etc.).</p>
    <p>A typical index group would like this:<codeblock>&lt;mapdriven:collected-data xmlns:mapdriven="http://dita4publishers.org/mapdriven"
                          xmlns:index-terms="http://dita4publishers.org/index-terms"
                          xmlns:enum="http://dita4publishers.org/enumerables">
  ...
   &lt;index-terms:index-terms>
     &lt;index-terms:ungrouped>
       ...
     &lt;/index-terms:ungrouped>
     &lt;index-terms:grouped-and-sorted>
       &lt;index-terms:index-group grouping-key="a" sorting-key="a">
            &lt;index-terms:label>A&lt;/index-terms:label>
            &lt;index-terms:sub-terms>
               &lt;index-terms:index-term grouping-key="a" sorting-key="apple">
                  &lt;index-terms:label>apple&lt;/index-terms:label>
                  &lt;index-terms:original-markup>
                     &lt;indexterm xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/"
                                class="- topic/indexterm "
                                xtrf="/Users/ekimber/workspace/dita4publishers/test/dita/index-test/topics/index-test-topic-01.dita"
                                xtrc="indexterm:3">apple&lt;/indexterm>
                  &lt;/index-terms:original-markup>
                  &lt;index-terms:sub-terms>
                     &lt;index-terms:index-term grouping-key="pie" sorting-key="pie">
                        &lt;index-terms:label>pie&lt;/index-terms:label>
                        &lt;index-terms:original-markup>
                           &lt;indexterm xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/"
                                      class="- topic/indexterm "
                                      xtrf="/Users/ekimber/workspace/dita4publishers/test/dita/index-test/topics/index-test-topic-02.dita"
                                      xtrc="indexterm:5">pie&lt;indexterm class="- topic/indexterm "
                                         xtrf="/Users/ekimber/workspace/dita4publishers/test/dita/index-test/topics/index-test-topic-02.dita"
                                         xtrc="indexterm:6">varieties of (tertiary entry under apple, pie)&lt;/indexterm>
                           &lt;/indexterm>
                        &lt;/index-terms:original-markup>
                        &lt;index-terms:sub-terms>
                           &lt;index-terms:index-term grouping-key="varieties of (tertiary entry under apple, pie)"
                                                   sorting-key="varieties of (tertiary entry under apple, pie)">
                              &lt;index-terms:label>varieties of (tertiary entry under apple, pie)&lt;/index-terms:label>
                              &lt;index-terms:original-markup>
                                 &lt;indexterm xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/"
                                            class="- topic/indexterm "
                                            xtrf="/Users/ekimber/workspace/dita4publishers/test/dita/index-test/topics/index-test-topic-02.dita"
                                            xtrc="indexterm:6">varieties of (tertiary entry under apple, pie)&lt;/indexterm>
                              &lt;/index-terms:original-markup>
                              &lt;index-terms:targets>
                                 &lt;index-terms:target source-uri="file:/Users/ekimber/workspace/dita4publishers/test/dita/index-test/temp/topics/index-test-topic-02.xml#topic-1">
                                    &lt;indexterm xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/"
                                               class="- topic/indexterm "
                                               xtrf="/Users/ekimber/workspace/dita4publishers/test/dita/index-test/topics/index-test-topic-02.dita"
                                               xtrc="indexterm:6">varieties of (tertiary entry under apple, pie)&lt;/indexterm>
                                 &lt;/index-terms:target>
                              &lt;/index-terms:targets>
                              &lt;index-terms:sub-terms/>
                           &lt;/index-terms:index-term>
                        &lt;/index-terms:sub-terms>
                     &lt;/index-terms:index-term>
                     ...</codeblock></p>
    <p>See the modules <filepath>map2htmlIndex.xsl</filepath> and map2htmlDynamicToc.xsl" in the HTML2 transform type for examples of using the index-terms structure to generate different renditions of the index.</p>
    <p> </p>
  </conbody>
</concept>
